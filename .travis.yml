language: ruby
cache: bundler

services:
  - docker

before_install:
  # Install Bundler v2 as Travis still uses v1.x
  - gem update --system
  - gem install bundler
  # Pull images to avoid extraneous output when calling `terraform` wrapper
  - for v in $TERRAFORM_VERSIONS; do docker pull hashicorp/terraform:$v; done

script: bundle exec rake "test[$TERRAFORM_VERSIONS]"

rvm:
  - 2.7.0
  - 2.6.5
  - 2.5.7
  - 2.4.9

env:
  global:
    - TERRAFORM_VERSIONS="0.12.9 0.11.14 0.10.8 0.9.11"
